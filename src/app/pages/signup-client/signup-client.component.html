<div class="max-w-md mx-auto bg-white p-6 rounded-md shadow-md">
  <!-- Título do formulário -->
  <h1 class="text-2xl font-bold mb-6">{{ 'signup.title' | translate }}</h1>

  <!-- Mensagem de sucesso (exibida se cliente foi cadastrado com sucesso) -->
  <div *ngIf="client$ | async" class="bg-green-100 text-green-800 p-3 rounded mb-4">
    {{ 'signup.success' | translate }}
  </div>

  <!-- Mensagem de erro (exibida se houve erro no cadastro) -->
  <div *ngIf="(error$ | async) as error" class="bg-red-100 text-red-800 p-3 rounded mb-4">
    {{ error }}
  </div>

  <form [formGroup]="signupForm" (ngSubmit)="submit()">
    <!-- Campo Nome -->
    <div class="mb-4">
      <label for="name" class="block font-medium mb-1">{{ 'signup.name' | translate }}</label>
      <input id="name" type="text" formControlName="name" class="w-full border border-gray-300 rounded px-3 py-2" />
      <div *ngIf="signupForm.get('name')?.invalid && signupForm.get('name')?.touched" class="text-red-600 text-sm mt-1">
        <span *ngIf="signupForm.get('name')?.errors?.['required']">{{ 'required' | translate }}</span>
        <span *ngIf="signupForm.get('name')?.errors?.['minlength']">{{ 'signup.nameMinLength' | translate }}</span>
      </div>
    </div>

    <!-- Campo E-mail -->
    <div class="mb-4">
      <label for="email" class="block font-medium mb-1">{{ 'signup.email' | translate }}</label>
      <input id="email" type="email" formControlName="email" class="w-full border border-gray-300 rounded px-3 py-2" />
      <div *ngIf="signupForm.get('email')?.invalid && signupForm.get('email')?.touched" class="text-red-600 text-sm mt-1">
        <span *ngIf="signupForm.get('email')?.errors?.['required']">{{ 'required' | translate }}</span>
        <span *ngIf="signupForm.get('email')?.errors?.['email']">{{ 'signup.emailInvalid' | translate }}</span>
      </div>
    </div>

    <!-- Campo Senha -->
    <div class="mb-4">
      <label for="password" class="block font-medium mb-1">{{ 'signup.password' | translate }}</label>
      <input id="password" type="password" formControlName="password" class="w-full border border-gray-300 rounded px-3 py-2" />
      <div *ngIf="signupForm.get('password')?.invalid && signupForm.get('password')?.touched" class="text-red-600 text-sm mt-1">
        <span *ngIf="signupForm.get('password')?.errors?.['required']">{{ 'required' | translate }}</span>
        <span *ngIf="signupForm.get('password')?.errors?.['minlength']">{{ 'signup.passwordMinLength' | translate }}</span>
      </div>
    </div>

    <!-- Campos de Endereço (grupo aninhado) -->
    <div formGroupName="address" class="mb-4">
      <h3 class="font-medium mb-2">{{ 'signup.address.title' | translate }}</h3>
      <div class="mb-3">
        <label for="street" class="block text-sm mb-1">{{ 'signup.address.street' | translate }}</label>
        <input id="street" type="text" formControlName="street" class="w-full border border-gray-300 rounded px-3 py-1" />
        <div *ngIf="signupForm.get('address.street')?.invalid && signupForm.get('address.street')?.touched" class="text-red-600 text-xs mt-1">
          {{ 'required' | translate }}
        </div>
      </div>
      <div class="mb-3">
        <label for="city" class="block text-sm mb-1">{{ 'signup.address.city' | translate }}</label>
        <input id="city" type="text" formControlName="city" class="w-full border border-gray-300 rounded px-3 py-1" />
        <div *ngIf="signupForm.get('address.city')?.invalid && signupForm.get('address.city')?.touched" class="text-red-600 text-xs mt-1">
          {{ 'required' | translate }}
        </div>
      </div>
      <div>
        <label for="country" class="block text-sm mb-1">{{ 'signup.address.country' | translate }}</label>
        <input id="country" type="text" formControlName="country" class="w-full border border-gray-300 rounded px-3 py-1" />
        <div *ngIf="signupForm.get('address.country')?.invalid && signupForm.get('address.country')?.touched" class="text-red-600 text-xs mt-1">
          {{ 'required' | translate }}
        </div>
      </div>
    </div>

    <!-- Lista de Telefones (FormArray) -->
    <div formArrayName="phones" class="mb-4">
      <h3 class="font-medium mb-2">{{ 'signup.phones.title' | translate }}</h3>
      <div *ngFor="let phoneCtrl of phones.controls; let i = index" class="mb-2">
        <div class="flex items-center">
          <input type="text" [formControlName]="i" class="flex-1 border border-gray-300 rounded px-3 py-1 mr-2" />
          <button type="button" (click)="removePhone(i)" class="text-sm text-red-600 hover:underline">
            {{ 'signup.phones.remove' | translate }}
          </button>
        </div>
        <div *ngIf="phoneCtrl.invalid && phoneCtrl.touched" class="text-red-600 text-xs mt-1">
          {{ 'required' | translate }}
        </div>
      </div>
      <button type="button" (click)="addPhone()" class="text-sm text-blue-600 hover:underline">
        + {{ 'signup.phones.add' | translate }}
      </button>
    </div>

    <!-- Botão de submissão -->
    <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 disabled:opacity-50"
            [disabled]="(loading$ | async) || signupForm.invalid">
      {{ (loading$ | async) ? ('signup.submitProcessing' | translate) : ('signup.submit' | translate) }}
    </button>
  </form>
</div>
